return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 flex items-center justify-center p-4">
            <div className="bg-white w-full max-w-md rounded-3xl shadow-xl overflow-hidden animate__animated animate__fadeInUp">
                {/* Header Section */}
                <div className="p-8 pb-4 text-center">
                    <div className="w-20 h-20 bg-orange-100 rounded-2xl flex items-center justify-center mx-auto mb-4 rotate-3 shadow-lg shadow-orange-100">
                        <Fingerprint className="text-orange-600 -rotate-3" size={40} />
                    </div>
                    <h1 className="text-2xl font-bold text-gray-800">Phonebook System</h1>
                    <p className="text-gray-500 text-sm mt-1">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</p>
                </div>

                {/* Tab Selector */}
                <div className="flex p-1 bg-gray-100 mx-8 rounded-xl mb-6">
                    <button 
                        onClick={() => setActiveTab('USER')}
                        className={`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${activeTab === 'USER' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}
                    >
                        ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
                    </button>
                    <button 
                        onClick={() => setActiveTab('ADMIN')}
                        className={`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${activeTab === 'ADMIN' ? 'bg-white text-orange-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}
                    >
                        ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà (Admin)
                    </button>
                </div>

                {/* Login Form */}
                <form onSubmit={handleLogin} className="p-8 pt-0 space-y-6">
                    {activeTab === 'USER' ? (
                        // FORM USER
                        <div className="space-y-6 animate__animated animate__fadeIn">
                            <div className="relative">
                                <User className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" size={20} />
                                <input
                                    type="text"
                                    placeholder="‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô 13 ‡∏´‡∏•‡∏±‡∏Å"
                                    value={idCard}
                                    onChange={(e) => setIdCard(e.target.value)}
                                    className="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all"
                                />
                            </div>
                            <div className="relative">
                                <Lock className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" size={20} />
                                <input
                                    type={showPassword ? "text" : "password"}
                                    placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"
                                    value={passwordValue}
                                    onChange={(e) => setPasswordValue(e.target.value)}
                                    className="w-full pl-10 pr-12 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all"
                                />
                            </div>
                        </div>
                    ) : (
                        // FORM ADMIN (‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)
                        <div className="space-y-6 animate__animated animate__fadeIn">
                            <div className="relative">
                                <User className="absolute left-3 top-1/2 -translate-y-1/2 text-orange-400" size={20} />
                                <input
                                    type="text"
                                    placeholder="Username"
                                    value={adminUsername}
                                    onChange={(e) => setAdminUsername(e.target.value)}
                                    className="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none transition-all"
                                />
                            </div>
                            <div className="relative">
                                <Lock className="absolute left-3 top-1/2 -translate-y-1/2 text-orange-400" size={20} />
                                <input
                                    type={showPassword ? "text" : "password"}
                                    placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"
                                    value={adminPassword}
                                    onChange={(e) => setAdminPassword(e.target.value)}
                                    className="w-full pl-10 pr-12 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none transition-all"
                                />
                                <button
                                    type="button"
                                    onClick={() => setShowPassword(!showPassword)}
                                    className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"
                                >
                                    {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}
                                </button>
                            </div>
                        </div>
                    )}

                    <button 
                        type="submit"
                        disabled={isLoading}
                        className={`w-full py-3 rounded-xl font-bold text-white shadow-lg transition-all transform active:scale-95 ${activeTab === 'USER' ? 'bg-blue-600 hover:bg-blue-700 shadow-blue-200' : 'bg-orange-600 hover:bg-orange-700 shadow-orange-200'}`}
                    >
                        {isLoading ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...' : '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö'}
                    </button>

                    <div className="text-center space-y-2">
                        <button 
                            type="button"
                            onClick={() => setIsForgetPasswordOpen(true)}
                            className="text-sm text-gray-500 hover:text-orange-600 transition-colors"
                        >
                            ‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?
                        </button>
                    </div>
                </form>
            </div>
        </div>
    )
}

'use client'

import { useState } from 'react'
import { useRouter } from 'next/navigation' 
import Link from 'next/link'
import { Fingerprint, Lock, User, Eye, EyeOff, ShieldAlert } from 'lucide-react'
import Swal from 'sweetalert2'


export default function LoginPage() {
    const router = useRouter(); 
    const [activeTab, setActiveTab] = useState<'USER' | 'ADMIN'>('USER'); 
    const [isForgetPasswordOpen, setIsForgetPasswordOpen] = useState(false);
    // --- USER STATES AND LOGIC ---
    const [idCard, setIdCard] = useState('')
    const [isIdFocused, setIsIdFocused] = useState(false) 
    const [idError, setIdError] = useState('') 
    const isIdActive = isIdFocused || idCard.length > 0
    const isIdError = idError.length > 0; 
    const [currentPage, setCurrentPage] = useState<'login' | 'register'>('login');

    const [passwordValue, setPasswordValue] = useState('');
    const [isPasswordFocused, setIsPasswordFocused] = useState(false);
    const isPasswordActive = isPasswordFocused || passwordValue.length > 0;
    const [isLoading, setIsLoading] = useState(false);
    const [showPassword, setShowPassword] = useState(false);

    const handleForgetPassword = async (e: React.MouseEvent) => {
        e.preventDefault();

        const { value: idCard } = await Swal.fire({
            title: "‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô",
            html: `
                <div style="text-align: left; margin-bottom: 10px;">
                    <p style="font-weight: bold; margin-bottom: 5px;">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:</p>
                    <ol style="padding-left: 20px;">
                        <li>‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</li>
                        <li>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÑ‡∏ß‡πâ</li>
                    </ol>
                </div>
            `,
            // icon: "question",
            input: "text", // ‡πÉ‡∏ä‡πâ input type text
            inputLabel: "‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô",
            inputPlaceholder: "‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô 13 ‡∏´‡∏•‡∏±‡∏Å",
            showCancelButton: true,
            confirmButtonText: '‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô',
            cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',
            reverseButtons: true,
            preConfirm: (id) => {
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏î‡∏™‡πà‡∏á
                if (!id || id.length !== 13 || !/^\d+$/.test(id)) {
                    Swal.showValidationMessage(`‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 13 ‡∏´‡∏•‡∏±‡∏Å`);
                    return false;
                }
                return id;
            }
        });

        if (idCard) {
            Swal.fire({
                title: "‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß",
                text: `‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÑ‡∏ß‡πâ‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô ${idCard} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß (Simulated)`,
                icon: "success",
                confirmButtonText: "‡∏ï‡∏Å‡∏•‡∏á"
            });
        }
    };

    // --- ADMIN STATES AND LOGIC (‚úÖ NEW) ---
    const [adminUsername, setAdminUsername] = useState('');
    const [isAdminUsernameFocused, setIsAdminUsernameFocused] = useState(false);
    const [adminUsernameError, setAdminUsernameError] = useState('');

    const [adminPassword, setAdminPassword] = useState('');
    const [isAdminPasswordFocused, setIsAdminPasswordFocused] = useState(false);
    const [adminPasswordError, setAdminPasswordError] = useState('');

    const isAdminUsernameActive = isAdminUsernameFocused || adminUsername.length > 0;
    const isAdminPasswordActive = isAdminPasswordFocused || adminPassword.length > 0;
    const isAdminUsernameError = adminUsernameError.length > 0;
    const isAdminPasswordError = adminPasswordError.length > 0;
    
    // --- SUBMISSION HANDLERS ---
const handleSubmit = (e: React.FormEvent) => {
  e.preventDefault();

  if (activeTab === 'ADMIN') {
    handleAdminLogin();
  } else {
    handleLogin();
  }
};
    
const handleLogin = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsLoading(true);

    try {
        // --- ‡∏Å‡∏£‡∏ì‡∏µ: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ù‡∏±‡πà‡∏á USER (‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô) ---
        if (activeTab === 'USER') {
            if (!idCard || !passwordValue) {
                Swal.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•", "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô", "warning");
                setIsLoading(false);
                return;
            }

            // ... (Logic ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á User ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API User ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ) ...
            
            // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ç‡∏≠‡∏á User
            Swal.fire({
                    icon: 'success',
                    title: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
                    showConfirmButton: false,
                    timer: 1500
                }).then(() => {
                    router.push('/phonebook/admin/dashboard');
                });
        } 
        
        // --- ‡∏Å‡∏£‡∏ì‡∏µ: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ù‡∏±‡πà‡∏á ADMIN (‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà) ---
        else {
            // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡πÑ‡∏´‡∏°
            if (!adminUsername || !adminPassword) {
                Swal.fire("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô", "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Username ‡πÅ‡∏•‡∏∞ Password", "warning");
                setIsLoading(false);
                return;
            }

            // ---------------------------------------------
            // üü¢ ‡∏à‡∏∏‡∏î‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API ‡∏ù‡∏±‡πà‡∏á Admin (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ)
            // ---------------------------------------------
            /* const res = await fetch('/api/admin/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username: adminUsername, password: adminPassword })
            });
            const data = await res.json();
            
            if (res.ok) {
                // Login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à -> ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Dashboard
                router.push('/phonebook/admin/dashboard');
            } else {
                Swal.fire("‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", data.message || "Username ‡∏´‡∏£‡∏∑‡∏≠ Password ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á", "error");
            }
            */

            // --- (‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≠ API ‡∏à‡∏£‡∏¥‡∏á) ---
            if (adminUsername === 'admin' && adminPassword === '1234') {
                Swal.fire({
                    icon: 'success',
                    title: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
                    showConfirmButton: false,
                    timer: 1500
                }).then(() => {
                    router.push('/phonebook/admin/dashboard');
                });
            } else {
                Swal.fire("‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î", "Username ‡∏´‡∏£‡∏∑‡∏≠ Password ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (Mock: admin/1234)", "error");
            }
            // ---------------------------------------------
        }
    } catch (error) {
        console.error("Login Error:", error);
        Swal.fire("‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î", "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö", "error");
    } finally {
        setIsLoading(false);
    }
};
    //     if (idCard.length === 0) {
    //         setIdError('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'); 
    //         return; 
    //     }
        
    //     setIdError('');
    //     router.push('/phonebook/auth/personal'); 
    // }

// ‚úÖ 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ù‡∏±‡πà‡∏á ADMIN
const handleAdminLogin = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!idCard.trim() || !passwordValue.trim()) {
        Swal.fire({
            icon: 'warning',
            title: '‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô',
            text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å username ‡πÅ‡∏•‡∏∞ password', // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
            confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á',
            confirmButtonColor: '#ff9800' // ‡∏™‡∏µ‡∏™‡πâ‡∏°‡∏ï‡∏≤‡∏° Theme ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
        });
        return; // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ fetch API
    }
    setIsLoading(true);

    try {
        const response = await fetch('/api/admin/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
                username: adminUsername,   // ‚úÖ ‡πÉ‡∏ä‡πâ‡∏Ç‡∏≠‡∏á ADMIN
                password: adminPassword,   // ‚úÖ ‡πÉ‡∏ä‡πâ‡∏Ç‡∏≠‡∏á ADMIN
                type: 'ADMIN'
            })
        });

        const data = await response.json();
        console.log("Full Data:", data);

        if (response.ok && data.success) {
            localStorage.setItem('userRole', data.role);
            localStorage.setItem('userName', data.name);

            await Swal.fire({
                icon: 'success',
                title: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
                text: '', //`‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå: ${data.role}
                timer: 1500,
                showConfirmButton: false
            });

            if (data.role === 'ADMIN') {
                router.push('/phonebook/admin/dashboard');
            } else if (data.role === 'UNIT_ADMIN') {
                router.push('/phonebook/unitAdmin/officeInfo');
            }
        } else {
            Swal.fire('‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', data.message || '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'error');
        }
    } catch (error: any) {
        Swal.fire('‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', error.message, 'error');
    } finally {
        setIsLoading(false);
    }
};


return (
    <div className="flex items-center justify-center min-h-screen p-4 sm:p-6 bg-[url('/login_background.jpg')] bg-cover bg-center bg-fixed">
            {/* Card Login ‡∏´‡∏•‡∏±‡∏Å */}
            <div className="bg-white w-full max-w-md rounded-3xl shadow-xl overflow-hidden animate__animated animate__fadeInUp">               
                {/* Header/Banner */}
                <div className="bg-[#ed6f00] p-6 text-white text-center">
                    <h1 className="text-2xl font-bold">OAG e-Phonebook</h1>
                    <p className="text-sm opacity-90 mt-1">‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏∏‡∏î‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå ‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</p>
                </div>

                <div className="p-6">
                    
                    {/* Tabs (User/Admin) */}
                    <div className="flex bg-gray-100 rounded-lg p-1 mb-6">
                        <button
                            onClick={() => setActiveTab('USER')}
                            className={`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${activeTab === 'USER' ? 'bg-[#ed8600] text-white shadow-md' : 'text-gray-600 hover:bg-white'}`}
                        >
                            USER
                        </button>
                        <button
                            onClick={() => setActiveTab('ADMIN')}
                            className={`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${activeTab === 'ADMIN' ? 'bg-[#ed8600] text-white shadow-md' : 'text-gray-600 hover:bg-white'}`}
                        >
                            ADMIN
                        </button>
                    </div>
                
                {/* EDITING */}

                <form onSubmit=
                {activeTab === 'USER' ? handleLogin : handleAdminLogin} className="space-y-6">
                        {/* Slide Container Wrapper: ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ overflow-hidden */}
                        <div className="overflow-hidden">
                            <div 
                                className={`flex transition-transform duration-300 ease-in-out`}
                                // ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ï‡∏≤‡∏° activeTab: USER=0%, ADMIN=-50%
                                style={{ 
                                    width: '200%', 
                                    transform: activeTab === 'USER' ? 'translateX(0%)' : 'translateX(-50%)'
                                }} 
                            >
                                {/* 1. USER LOGIN CONTENT (‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ã‡πâ‡∏≤‡∏¢ - w-1/2) */}
                                <div className="w-1/2 pr-2 flex-shrink-0 space-y-4"> 
                                    
                                    {/* ID Card Input Field */}
                                    <div className={`relative pt-4`}> 
                                        <label 
                                            htmlFor="id_card" 
                                            className={`absolute left-0 transition-all pointer-events-none ${isIdActive ? 'top-1 text-xs text-gray-500' : 'top-3 text-sm text-gray-400'}`}
                                        >
                                            ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô
                                        </label>
                                        <div className="flex items-center border-b-2 border-gray-300 focus-within:border-[#0f3fa6] transition-colors pb-1"> 
                                            <input
                                                type="text"
                                                id="id_card"
                                                value={idCard}
                                                onChange={(e) => {
                                                    const value = e.target.value.replace(/\D/g, '').slice(0, 13);
                                                    setIdCard(value);
                                                    if (idError) setIdError(''); 
                                                }}
                                                onFocus={() => setIsIdFocused(true)}
                                                onBlur={() => setIsIdFocused(false)}
                                                className="w-full outline-none bg-transparent text-gray-700"
                                                maxLength={13}
                                                autoComplete="off"
                                            />
                                        </div>
                                        {isIdError && <p className="text-xs text-red-500 mt-1">{idError}</p>}
                                    </div>
                                    {/* ‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö 0 / 13 */}
                                    <div className="text-right text-xs pr-1 mt-[-10px] text-gray-400">
                                        {idCard.length} / 13
                                    </div>

                                    {/* Password Input Field */}
                                    <div className={`relative pt-4`}> 
                                        <label 
                                            htmlFor="password" 
                                            className={`absolute left-0 transition-all pointer-events-none ${isPasswordActive ? 'top-1 text-xs text-gray-500' : 'top-3 text-sm text-gray-400'}`}
                                        >
                                            ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
                                        </label>
                                        <div className="flex items-center border-b-2 border-gray-300 focus-within:border-[#0f3fa6] transition-colors pb-1">                                            
                                            <input
                                                type="password"
                                                id="password"
                                                value={passwordValue}
                                                onChange={(e) => setPasswordValue(e.target.value)}
                                                onFocus={() => setIsPasswordFocused(true)}
                                                onBlur={() => setIsPasswordFocused(false)}
                                                className="w-full outline-none bg-transparent text-gray-700"
                                                autoComplete="current-password"
                                            />
                                        </div>
                                        <p className="text-xs text-gray-500 mt-1">
                                            ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô = ‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏µ‡πÄ‡∏Å‡∏¥‡∏î
                                        </p>
                                        <p className="text-xs text-gray-500 mt-1">(‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á : 1 ‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô 2537 ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô 01062537)</p>
                                    </div>

                                    {/* ‚úÖ USER: Forgot Password & Register Link */}
                                    <div className="flex justify-between items-center text-sm pt-2">
                                        <a 
                                            href="#" 
                                            onClick={handleForgetPassword} 
                                            className="text-xs text-blue-600 hover:text-blue-800 hover:underline transition-colors font-medium" 
                                        >
                                            ‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?
                                        </a>
                                        <Link 
                                            href="/register" 
                                            className="text-xs text-green-600 hover:text-green-800 hover:underline transition-colors font-medium" 
                                        >
                                            ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
                                        </Link>
                                    </div>
                                    
                                    {/* ‚úÖ USER: Privacy Notice Link */}
                                    <div className="text-right text-xs space-y-1">
                                        <a href="/data_privacynotice.pdf" className="text-blue-500 block hover:underline">
                                            <Lock size={12} className="inline mr-1 -mt-0.5" /> PRIVACY NOTICE
                                        </a>
                                    </div>
                                </div>

                                {/* 2. ADMIN LOGIN CONTENT (‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏Ç‡∏ß‡∏≤ - w-1/2) */}
                                <div className="w-1/2 pl-2 flex-shrink-0 space-y-4"> 
                                    
                                    {/* Admin Username Input Field */}
                                    <div className={`relative pt-4`}>
                                        <label 
                                            htmlFor="admin_username" 
                                            className={`absolute left-0 transition-all pointer-events-none ${isAdminUsernameActive ? 'top-1 text-xs text-gray-500' : 'top-3 text-sm text-gray-400'}`}
                                        >
                                            Username
                                        </label>
                                        <div className="flex items-center border-b-2 border-gray-300 focus-within:border-[#0f3fa6] transition-colors pb-1">
                                            <input
                                                type="text"
                                                id="admin_username"
                                                value={adminUsername}
                                                onChange={(e) => setAdminUsername(e.target.value)}
                                                onFocus={() => setIsAdminUsernameFocused(true)}
                                                onBlur={() => setIsAdminUsernameFocused(false)}
                                                className="w-full outline-none bg-transparent text-gray-700"
                                                autoComplete="username"
                                            />
                                        </div>
                                        {adminUsernameError && <p className="text-xs text-red-500 mt-1">{adminUsernameError}</p>}
                                    </div>

                                    {/* Admin Password Input Field */}
                                    <div className={`relative pt-4`}>
                                        <label 
                                            htmlFor="admin_password" 
                                            className={`absolute left-0 transition-all pointer-events-none ${isAdminPasswordActive ? 'top-1 text-xs text-gray-500' : 'top-3 text-sm text-gray-400'}`}
                                        >
                                            Password
                                        </label>
                                        <div className="flex items-center border-b-2 border-gray-300 focus-within:border-[#0f3fa6] transition-colors pb-1">                                            <input
                                                type="password"
                                                id="admin_password"
                                                value={adminPassword}
                                                onChange={(e) => setAdminPassword(e.target.value)}
                                                onFocus={() => setIsAdminPasswordFocused(true)}
                                                onBlur={() => setIsAdminPasswordFocused(false)}
                                                className="w-full outline-none bg-transparent text-gray-700"
                                                autoComplete="current-password"
                                            />
                                        </div>
                                        {adminPasswordError && <p className="text-xs text-red-500 mt-1">{adminPasswordError}</p>}
                                    </div>
                                    
                                    {/* ‚úÖ ADMIN: Forgot Password & Register Link */}
                                    <div className="flex justify-between items-center text-sm pt-2">
                                        <a 
                                            href="#" 
                                            onClick={handleForgetPassword} 
                                            className="text-xs text-blue-600 hover:text-blue-800 hover:underline transition-colors font-medium" 
                                        >
                                            ‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?
                                        </a>
                                        <Link 
                                            href="/register" 
                                            className="text-xs text-green-600 hover:text-green-800 hover:underline transition-colors font-medium" 
                                        >
                                            ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
                                        </Link>
                                    </div>

                                    {/* ‚úÖ ADMIN: Privacy Notice Link */}
                                    <div className="text-right text-xs space-y-1">
                                        <a href="/data_privacynotice.pdf" className="text-blue-500 block hover:underline">
                                            <Lock size={12} className="inline mr-1 -mt-0.5" /> PRIVACY NOTICE
                                        </a>                                    
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {/* Login Button (‡∏≠‡∏¢‡∏π‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Form ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Submit ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢) */}
<button 
                        type="submit"
                        disabled={isLoading}
                        className={`w-full py-3 rounded-xl font-bold text-white shadow-lg transition-all transform active:scale-95 ${activeTab === 'USER' ? 'bg-blue-600 hover:bg-blue-700 shadow-blue-200' : 'bg-orange-600 hover:bg-orange-700 shadow-orange-200'}`}
                    >
                        {isLoading ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...' : '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö'}
                    </button>

<button
    type="submit"
    // ‚úÖ ‡πÄ‡∏ä‡πá‡∏Ñ Tab ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡∏ß
    disabled={isLoading}
    className={`w-full font-semibold py-3 rounded-lg shadow-md transition-all duration-200 mt-4 text-lg
        ${isLoading 
            ? "bg-gray-400 cursor-not-allowed" 
            : activeTab === 'USER'
                ? "bg-blue-600 hover:bg-blue-700 text-white hover:shadow-lg active:scale-95" // üîµ ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö User
                : "bg-[#ff9800] hover:bg-[#f57c00] text-white hover:shadow-lg active:scale-95" // üü† ‡∏™‡∏µ‡∏™‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin
        }`}
>
    {isLoading ? (
        <div className="flex items-center justify-center space-x-2">
            <div className="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
            <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...</span>
        </div>
    ) : (
        // ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
        activeTab === 'USER' ? "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô" : "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö Admin"
    )}
</button>
                        
                        {/* <button
                            type="submit"
                            className="w-full bg-[#ff9800] hover:bg-[#f57c00] text-white font-semibold py-3 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 mt-4 text-lg" 
                        >
                            ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                        </button> */}
                    </form>
                </div>
            </div>
            
            {/* ‚úÖ Forget Password Modal Component */}
            {isForgetPasswordOpen && (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-lg shadow-2xl w-full max-w-lg overflow-hidden">
                        
                        {/* Modal Header */}
                        <div className="p-5 border-b border-gray-200">
                            <h3 className="text-xl font-semibold text-gray-800">‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h3>
                            <p className="text-sm text-gray-500">(‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)</p>
                        </div>

                        {/* Modal Body */}
                        <div className="p-5 space-y-4">
                            <h4 className="font-medium text-gray-700">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</h4>
                            <ol className="list-decimal list-inside text-sm text-gray-600 space-y-1">
                                <li>‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</li>
                                <li>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° `‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô` ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÑ‡∏ß‡πâ</li>
                            </ol>
                            
                            {/* Input Field (‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô) */}
                            <div className="relative pt-4 pb-2">
<label htmlFor="modal-idcard" className="block text-sm font-medium text-gray-700 mb-1">
            ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô
        </label>

<input
            type="text"
            id="modal-idcard"
            // ‡πÉ‡∏ä‡πâ State idCard ‡πÅ‡∏•‡∏∞ Setter ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
            value={idCard}
            onChange={(e) => {
                // ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß
                const value = e.target.value.replace(/\D/g, '').slice(0, 13);
                setIdCard(value);
            }}
            maxLength={13}
            placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô 13 ‡∏´‡∏•‡∏±‡∏Å"
            className="w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-orange-500 focus:border-blue-200 text-sm"
        />
                            </div>

                            {/* ‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö 0 / 13 ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á Input Field ‡∏Ç‡∏≠‡∏á Modal */}
<div className="text-right text-xs pr-1 mt-1 text-gray-400">
            {idCard.length} / 13
        </div>
                        </div>

                        {/* Modal Footer (Buttons) */}
                        <div className="p-5 flex justify-end space-x-3 bg-gray-50 border-t border-gray-200">
                            <button 
                                onClick={() => {
                                    setIsForgetPasswordOpen(false);
                                     // ‡∏õ‡∏¥‡∏î Modal ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                }}
                                className="px-4 py-2 text-sm font-medium rounded shadow-sm transition bg-gray-300 text-gray-700 hover:bg-gray-400"
                            >
                                ‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
                            </button>
                            <button 
                                onClick={() => setIsForgetPasswordOpen(false)}
                                className="px-4 py-2 text-sm font-medium rounded shadow-sm transition bg-red-500 text-white hover:bg-red-600"
                            >
                                ‡∏õ‡∏¥‡∏î
                            </button>
                        </div>
                    </div>
                </div>
            )}
        </div>
    )
}


///////////////////////////////////////////////////////////////////////////////////

                {/* --- MAIN FORM --- */}
                <form onSubmit={handleLogin} className="p-8 pt-0 space-y-5">
                    <div className="space-y-4 animate__animated animate__fadeIn">
                        {/* INPUT 1: Username / ID Card */}
                        {/* <div className="relative group">
                            <div className={`absolute left-3 top-1/2 -translate-y-1/2 transition-colors ${activeTab === 'USER' ? 'text-blue-400' : 'text-orange-400'}`}>
                                <User size={20} />
                            </div>
                            <input 
                                type="text" 
                                placeholder={activeTab === 'USER' ? "‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô" : "Username"}
                                value={activeTab === 'USER' ? idCard : adminUsername}
                                onChange={(e) => activeTab === 'USER' ? setIdCard(e.target.value) : setAdminUsername(e.target.value)}
                                className="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 outline-none transition-all focus:ring-opacity-50 focus:border-transparent"
                                style={{ focusRingColor: activeTab === 'USER' ? '#2563eb' : '#ea580c' } as any}
                            />
                        </div> */}
                            <div className={`relative pt-4`}> 
                                <div className="flex items-center border-b-2 border-gray-300 focus-within:border-[#0f3fa6] transition-colors pb-1"> 
                                    {activeTab === 'USER' ? (
                                        /* --- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á USER (‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô) --- */
                                        <input
                                            type="text"
                                            id="id_card"
                                            placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô"
                                            value={idCard}
                                            onChange={(e) => {
                                                // ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 13 ‡∏´‡∏•‡∏±‡∏Å
                                                const value = e.target.value.replace(/\D/g, '').slice(0, 13);
                                                setIdCard(value);
                                                if (idError) setIdError(''); 
                                            }}
                                            onFocus={() => setIsIdFocused(true)}
                                            onBlur={() => setIsIdFocused(false)}
                                            className="w-full outline-none bg-transparent text-gray-700"
                                            maxLength={13}
                                            autoComplete="off"
                                        />
                                    ) : (
                                        /* --- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á ADMIN (Username ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ) --- */
                                        <input
                                            type="text"
                                            id="admin_username"
                                            placeholder="‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Username)"
                                            value={adminUsername}
                                            onChange={(e) => {
                                                // ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ ‡πÑ‡∏°‡πà‡πÇ‡∏î‡∏ô‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
                                                setAdminUsername(e.target.value);
                                            }}
                                            className="w-full outline-none bg-transparent text-gray-700"
                                            autoComplete="off"
                                        />
                                    )}
                                </div>
                                
                                {/* ‡πÅ‡∏™‡∏î‡∏á Error ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ù‡∏±‡πà‡∏á User ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ */}
                                {activeTab === 'USER' && isIdError && (
                                    <p className="text-xs text-red-500 mt-1">{idError}</p>
                                )}
                            </div>

                            {/* ‚úÖ ‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤ USER ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô */}
                            {activeTab === 'USER' && (
                                <div className="text-right text-xs pr-1 mt-[-10px] text-gray-400">
                                    {idCard.length} / 13
                                </div>
                            )}

                        {/* INPUT 2: Password with Single Eye Icon */}
                        <div className="relative pt-4">
    <div className="flex items-center border-b-2 border-gray-300 focus-within:border-[#0f3fa6] transition-colors pb-1">
        {activeTab === 'USER' ? (
            /* --- ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö USER --- */
            <div className="relative w-full">      {/* <-- ‡∏ó‡∏≥ container ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô relative + w-full */}
                <input
                    type={showPassword ? "text" : "password"}
                    id="password_user"
                    placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"
                    value={passwordValue}
                    onChange={(e) => setPasswordValue(e.target.value)}
                    className="w-full outline-none bg-transparent text-gray-700 pr-10"  /* pr-10 ‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô */
                />

                {/* ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô container ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ right-0 ‡∏ñ‡∏∂‡∏á‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î */}
                {passwordValue.length > 0 && (
                    <button
                    type="button"
                    onClick={() => setShowPassword(!showPassword)}
                    className="absolute right-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#0f3fa6] transition-colors p-1"
                    >
                    {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}
                    </button>
                )}
                </div>
        ) : (
            /* --- ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ADMIN --- */
            <div className="relative w-full flex items-center">
                <input
                    type={showPassword ? "text" : "password"}
                    id="password_admin"
                    placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"
                    value={adminPassword}
                    onChange={(e) => setAdminPassword(e.target.value)}
                    className="w-full outline-none bg-transparent text-gray-700 pr-10"
                />
                {/* ‡πÅ‡∏™‡∏î‡∏á‡∏î‡∏ß‡∏á‡∏ï‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå */}
                {adminPassword.length > 0 && (
                    <button
                        type="button"
                        onClick={() => setShowPassword(!showPassword)}
                        className="absolute right-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#0f3fa6] transition-colors p-1">
                        {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}
                    </button>
                )}
                </div>
                )}
            </div>
        </div>
        {/* --- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ USER) --- */}
    {activeTab === 'USER' && (
        <div className="mt-2 space-y-0.5 animate__animated animate__fadeIn">
            <p className="text-[13px] text-gray-900 font-medium">
                *‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡∏Ñ‡∏∑‡∏≠ ‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏µ‡πÄ‡∏Å‡∏¥‡∏î
            </p>
            <p className="text-[12px] text-gray-800">
                (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á : 1 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2540 ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ñ‡∏∑‡∏≠ 01012540)
            </p>
        </div>
    )}
    </div>

                    {/* SUBMIT BUTTON */}
                    <button type="submit" disabled={isLoading}
                        className={`w-full py-3.5 rounded-xl font-bold text-white shadow-lg transition-all transform active:scale-[0.98] flex items-center justify-center ${activeTab === 'USER' ? 'bg-blue-600 hover:bg-blue-700 shadow-blue-100' : 'bg-orange-600 hover:bg-orange-700 shadow-orange-100'}`}>
                        {isLoading ? (
                            <>
                                <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" viewBox="0 0 24 24">
                                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...
                            </>
                        ) : '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö'}
                    </button>

                    {/* --- FOOTER LINKS --- */}
                    <div className="text-center pt-2 px-1">
    {activeTab === 'USER' ? (
        /* ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö USER: ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô (‡∏ã‡πâ‡∏≤‡∏¢) | ‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡∏Ç‡∏ß‡∏≤) */
        <div className="flex items-center justify-between mb-6 animate__animated animate__fadeIn">
            <p className="text-sm text-gray-600">
                <Link href="/register" className="text-blue-600 font-bold hover:underline">
                    ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
                </Link>
            </p>
            <button 
                type="button" 
                onClick={() => setIsForgetPasswordOpen(true)}
                className="text-sm text-orange-500 hover:text-red-600 transition-colors font-medium hover:underline">
                ‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
            </button>
        </div>
    ) : (
        /* ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ADMIN: ‡∏à‡∏±‡∏î‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏ß‡πâ‡∏ù‡∏±‡πà‡∏á‡∏Ç‡∏ß‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°) */
        <div className="flex items-center justify-between mb-6 animate__animated animate__fadeIn">
            <p className="text-sm text-gray-600">
                <Link href="/register" className="text-blue-600 font-bold hover:underline">
                    ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
                </Link>
            </p>
            <button 
                type="button" 
                onClick={() => setIsForgetPasswordOpen(true)}
                className="text-sm text-orange-500 hover:text-red-600 transition-colors font-medium hover:underline">
                ‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
            </button>
        </div>
    )}
    
    {/* Privacy Notice (‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î) */}
    <div className="flex justify-center border-t border-gray-100 pt-4">
        <Link href="/privacy-notice" className="text-[10px] text-gray-400 hover:text-gray-600 transition-colors flex items-center uppercase tracking-widest font-semibold">
            <ShieldAlert size={12} className="mr-1.5" />
            Privacy Notice
        </Link>
    </div>
</div>
                </form>

    const initialRequests = [
 //full  
    { id: 1, name: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ', idCard: '1100100223344', title: '‡∏ô‡∏≤‡∏¢' , firstName: '‡∏™‡∏°‡∏ä‡∏≤‡∏¢' , lastName: '‡πÉ‡∏à‡∏î‡∏µ', office: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏î‡∏µ‡∏≠‡∏≤‡∏ç‡∏≤', position: '‡∏ô‡∏¥‡∏ï‡∏¥‡∏Å‡∏£',  phone: '081-234-5678', attached: 'click', status: 'PENDING' },
    {id: 2, name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÉ‡∏ù‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏£‡∏π‡πâ‡∏à‡∏£‡∏¥‡∏á', idCard: '3200500112233', title: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß', firstName: '‡πÉ‡∏ù‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', lastName: '‡∏£‡∏π‡πâ‡∏à‡∏£‡∏¥‡∏á', office: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏î‡∏µ‡πÅ‡∏û‡πà‡∏á', position: '‡∏ô‡∏¥‡∏ï‡∏¥‡∏Å‡∏£',  phone: '081-234-5678', attached: 'click', status: 'PENDING' },
    {id: 3, name: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ', idCard: '1104400556677', title: '‡∏ô‡∏≤‡∏¢', firstName: '‡∏™‡∏°‡∏ä‡∏≤‡∏¢', lastName: '‡πÉ‡∏à‡∏î‡∏µ', office: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏î‡∏µ‡∏≠‡∏≤‡∏ç‡∏≤', position: '‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå',  phone: '081-234-5678', attached: 'click', status: 'PENDING' },
    {id: 4, name: '‡∏ô‡∏≤‡∏á‡∏°‡∏≤‡∏£ ‡∏£‡πâ‡∏≤‡∏¢', idCard: '1900100100234', title: '‡∏ô‡∏≤‡∏á' , firstName: '‡∏°‡∏≤‡∏£' , lastName: '‡∏£‡πâ‡∏≤‡∏¢', office: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡∏Ø', position: '‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏Ø', phone:'087-654-4561', attached: 'click', status: 'APPROVED' }
    
    { id: 1, name: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ', idCard: '1100100223344', phone: '081-234-5678', office: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏î‡∏µ‡∏≠‡∏≤‡∏ç‡∏≤', date: '2026-01-14 09:30', status: 'PENDING' },
    { id: 2, name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÉ‡∏ù‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏£‡∏π‡πâ‡∏à‡∏£‡∏¥‡∏á', idCard: '3200500112233', phone: '089-888-9999', office: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏î‡∏µ‡πÅ‡∏û‡πà‡∏á', date: '2026-01-14 10:15', status: 'PENDING' },
    { id: 3, name: '‡∏ô‡∏≤‡∏¢‡∏Ç‡∏¢‡∏±‡∏ô ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô', idCard: '1104400556677', phone: '085-111-2222', office: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏î‡∏µ‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô', date: '2026-01-13 15:45', status: 'PENDING' },
    ]

                    <th className="px-6 py-4 text-left">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</th>
                    <th className="px-6 py-4 text-left">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</th>
                    <th className="px-6 py-4 text-left">‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤</th>
                    <th className="px-6 py-4 text-left">‡∏ä‡∏∑‡πà‡∏≠</th>
                    <th className="px-6 py-4 text-left">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                    <th className="px-6 py-4 text-left">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</th>
                    <th className="px-6 py-4 text-left">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</th>
                    <th className="px-6 py-4 text-left">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</th>
                    <th className="px-6 py-4 text-left">‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£</th>
                    <th className="px-6 py-4 text-right">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</th>


                    <th className="px-6 py-4 text-left">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• / ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
                    <th className="px-6 py-4 text-left">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</th>
                    <th className="px-6 py-4 text-left">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</th>
                    <th className="px-6 py-4 text-left">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£</th>
                    <th className="px-6 py-4 text-right">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</th>